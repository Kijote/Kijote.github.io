<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>
	<style>
		body{background-color:#000;}
		#log{color:#fff; display:none;}
		#log>code{display:block;}
		#soundmanager-debug{color:#fff;}
		button{font-size: 5vh; min-width: 10vw;}
	</style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	

	<script>
		// auto actualización ME CAGO EN SAMSUNG!

		d = new Date();
		var now = d.getFullYear() + '' + d.getMonth() + '' + d.getDate() + '' + d.getHours() + '' + d.getMinutes();
		var wl = '' + window.location;
		var wls = window.location.search;
		if("" == wls.substr(1).trim() || wls.substr(1).trim() != now){
			window.location = wl.replace(wls, '') + '?' + now; //(new Date()).getMilliseconds() * Math.random() * 1e14;
		}
		
		$(document).keypress(function(event) {
          console.log('Handler for .keypress() called. - ' + event.charCode);
		});
		
		$(function(){
			
			var log = document.querySelector('#log');

			['log','warn','error'].forEach(function (verb) {
				console[verb] = (function (method, verb, log) {
					return function (text) {
						method(text);
						// handle distinguishing between methods any way you'd like
						var msg = document.createElement('code');
						msg.classList.add(verb);
						msg.textContent = verb + ': ' + text;
						log.appendChild(msg);
					};
				})(console[verb].bind(console), verb, log);
			});
			
		});
	</script>

	<script>
	var radios = new Array();
	var act_radio = 0;

	radios[ 8950] = {type: "audio/aac", radio_name: "Zafiro", url: "http://107.170.2.225:8040/zafiro"};
	radios[ 9410] = {type: "audio/aac", radio_name: "La Red (Bs. As.)", url: "http://190.113.164.52:8080/LaRedCapital"};
	radios[ 9370] = {type: "audio/aac", radio_name: "Montecristo", url: "http://190.113.164.52:8080/montecristo"};
	radios[ 9490] = {type: "audio/aac", radio_name: "Brava", url: "http://190.113.164.52:8080/brava"};
	radios[ 9530] = {type: "audio/aac", radio_name: "Metropolitana", url: "http://streamall.alsolnet.com:443/metropolitana"};
	radios[ 9610] = {type: "audio/aac", radio_name: "Una", url: "http://190.113.164.52:8080/una"};
	radios[ 9810] = {type: "audio/aac", radio_name: "Ayer", url: "http://190.113.164.52:8080/ayer"};
	radios[ 9890] = {type: "audio/aac", radio_name: "Nihuil", url: "http://190.113.164.52:8080/NihuilAMUSP"};
	radios[10090] = {type: "audio/aac", radio_name: "Estación del sol", url: "http://audio.bustream.com:8064/stream"};
	radios[10091] = {type: "audio/aac", radio_name: "Del sol - Fiesta", url: "http://audio.bustream.com:8052/stream"};
	radios[10092] = {type: "audio/aac", radio_name: "Del sol - Lentos", url: "http://audio.bustream.com:8054/stream"};
	radios[10093] = {type: "audio/aac", radio_name: "Del sol - Play", url: "http://audio.bustream.com:8051/stream"};
	radios[10094] = {type: "audio/aac", radio_name: "Del sol - Retro", url: "http://audio.bustream.com:8050/stream"};
	radios[10095] = {type: "audio/aac", radio_name: "Del sol - Rock", url: "http://audio.bustream.com:8053/stream"};
	
	


	$(document).ready(function() {
		radios.forEach(function (item, index, array){
			console.log(array);
			var itemName = index / 100;
			if ( array[index].hasOwnProperty('radio_name') ) {
				itemName = array[index].radio_name + "<br />" + index / 100;
			}
			$('<button id="' + index + '" value="' + index / 100 + '" onclick="play(' + index + ');">' + itemName + '</button>').appendTo('body');
			console.log(item);
		});
	});

	function play(index){
		act_radio = index;
		console.log(soundObject);
		soundObject.destruct();

		var radio = radios[index];
		radio.onload = function(bSuccess) {
			console.log($('#' + act_radio));
			if(!bSuccess) { $('#' + act_radio).css('background-color', 'red'); }
		    	soundManager._writeDebug('sound '+(bSuccess?'loaded!': 'did NOT load.'));
		}

		soundObject = soundManager.createSound(radio);

		soundObject.play();
	}
	</script>

	<script>
		var soundObject;
		
		$(function(){
			window.soundManager = new SoundManager();
			window.volume = 100;
			
			soundManager.setup({
				// debugMode: true,
				// useConsole: true,
				// consoleOnly: false,
				
				url: "https://rawgit.com/scottschiller/SoundManager2/tree/master/swf",
				preferFlash: false,
				useHighPerformance: true,
				useHTML5Audio: true,
				waitForWindowLoad: false,
				
				onready: function(){
					soundObject = soundManager.createSound({
						id: "webradio",
						/*
						url: [{
							type: "audio/aac",
							url: "http://audio.bustream.com:8064/1009mp3?type=.mp3"
//									url: "http://70.38.29.199:8064/stream"
//									url: "http://audio.bustream.com:8064/stream"
						}],
						*/
						url: 'http://www.freshly-ground.com/data/audio/binaural/Mak.mp3',
						autoLoad: true,
						autoPlay: true,
						multiShot: false,
						volume: volume,
						onload: function(bSuccess) {
						    soundManager._writeDebug('sound '+(bSuccess?'loaded!': 'did NOT load.'));
						},

						onfailure: function() {
							$('#' + act_radio).css('background-color', 'red');
						},
					});
					soundObject.play();
					setTimeout(function() {
						if (soundObject.readyState == 1) {
							console.log('this object is probably stalled');
							// this object is probably stalled
							}
					},5500);
				},

				ontimeout: function(){
					console.log('soundObject.readyState: ' + soundObject.readyState);
				}
			});
		});

	</script>

	<!-- script>
	$(document).ready(function() {
		window.onloadRetry = 0;
		window.soundManager = new SoundManager();
		window.volume = 100;

		console.log('volume:' + window.volume);
		
		// Setup SoundManager
		soundManager.setup({
					debugMode: true,
					useConsole: true,
					consoleOnly: false,
					
					flashLoadTimeout: 1000,
					flashVersion: 9,
					preferFlash: false,
					url: "/swf/",
					useHighPerformance: true,
					useHTML5Audio: true,
					waitForWindowLoad: false,
					onready: function() {
						console.log('soundManager: onready');
						soundManager.createSound({

						// 100.9
						id: "webradio",
						url: [{
							type: "audio/aac",
//							url: "http://70.38.29.199:8064/stream"
							url: "http://audio.bustream.com:8064/stream"
						}],

/*
						// vorterix
						id: "webradio",
						serverURL: "rtmp://r20057.smi.vmf.edge-apps.net/magma-apps/",
						url: [{
							stream: true,
							type: "audio/mp4",
							url: "vorterix_radio1_high"
						}],
*/				
						
						autoLoad: true,
						autoPlay: true,
						multiShot: false,
						volume: volume,
						onconnect: function( bConnect ) {
							console.log('soundManager: onconnect');
							//setButtonStop();
						},
						onfailure: function() {
							console.log('soundManager: onfailure');
							//setButtonError();
						},
						onload: function( bSuccess ) {
							console.log('soundManager: onload');
							if ( bSuccess == true ) {
								console.log('soundManager: onload - success!');
								//setButtonStop();
							} else {
								console.log('soundManager: onload - nope!');
								if ( window.onloadRetry != 2 ) {
									console.log('soundManager: rebooting');
									window.onloadRetry++;
									soundManager.reboot();
								} else {
									console.log('soundManager: onload - FAIL!');
									//setButtonError();
								}
							}
	
						},
						onplay: function() {
							//setButtonStop();
						}
					});
				},
				ontimeout: function() {
					//setButtonError();
				}
		})
	});
/*		
		// Set the audio controls
		$( "#sm-audio-icon" ).unbind( "click" ).on( "click", function(e) {
			e.preventDefault();
			e.stopPropagation();

			if ( $( this ).attr( "data-state" ) == "On" && $( "input[type=range]" ).val() > 0 ) {
				document.cookie = "volume_unmute=" + volume + "; path=/"; 				setButtonMute(); 				$( "input[type=range]" ).val( 0 ).change(); 				soundManager.mute( "webradio" ); 			} else if ( $( this ).attr( "data-state" ) == "Off" || $( "input[type=range]" ).val() === 0 ) {
				volume = getCookieValue( "volume_unmute" ); 				volume = ( $.isNumeric( volume ) && volume > 0 && volume <= 100 ) ? volume : 50; 				setButtonUnMute(); 				$( "input[type='range']" ).val( volume ).change(); 				soundManager.unmute( "webradio" ); 			}
		});

		// Set the play controls
		$( ".sm-button" ).bind( "click", function() {
			if ( $( this ).attr( "alt" ) == "Flash" ) {
				window.open( "https://get.adobe.com/flashplayer/" );
			} else if ( $( this ).attr( "alt" ) == $( "#sm-button-container" ).data( "play" ) ) {
				setButtonStop();
				( $( "#sm-button-container" ).data( "device-category" ) != "desktop" ) ? soundManager.play( "webradio" ) : soundManager.play( "webradio" );
			} else if ( $( this ).attr( "alt" ) == $( "#sm-button-container" ).data( "start" ) ) {
				setButtonPreloader();
				( $( "#sm-button-container" ).data( "device-category") != "desktop" ) ? soundManager.play( "webradio" ) : "";
			} else if ( $( this ).attr( "alt" ) == $( "#sm-button-container" ).data( "stop" ) ) {
				setButtonPlay();
				( $( "#sm-button-container" ).data( "device-category" ) != "desktop" ) ? soundManager.unload( "webradio" ) : soundManager.unload( "webradio" );
			}
		});

		// Kick-start the SoundManager init process?
		if ( $( "#sm-button-container" ).data( "flash-mode" ) == "1" && typeof( detectFlash ) === "function" && !detectFlash() ) {
			setButtonFlash();
		} else {
			$( "#sm-button-container" ).data( "device-category" ) == "desktop" ? addVolumeSider() : ""; 			soundManager.beginDelayedInit(); 		}
	});
*/
	</script -->
    </head>
    <body>
		<div id="log"></div>
		<!-- script src="https://cdnjs.cloudflare.com/ajax/libs/soundmanager2/2.97a.20150601/script/soundmanager2-nodebug-jsmin.js"></script -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/soundmanager2/2.97a.20150601/script/soundmanager2.js"></script>
    </body>
</html>





<!-- 
var page = require('webpage').create();
page.open('page.es', function (status) { 
	if (status !== 'success') { 
		console.log('Unable to load the address!');
		phantom.exit();
	} else { 
		window.setTimeout(
			function () { 
					page.viewportSize = { width: 1000, height: 800 }; 
					console.log(page.content); 
					phantom.exit(); 
			}, 400); 
	} 
});

-->

<!-- Mozilla/5.0 (SMART-TV; Linux; Tizen 2.4.0) AppleWebKit/538.1 (KHTML, like Gecko) SamsungBrowser/1.1 TV Safari/538.1 -->
